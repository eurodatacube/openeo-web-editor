{"version":3,"sources":["webpack:///./node_modules/@openeo/vue-components/components/internal/Loading.vue","webpack:///node_modules/@openeo/vue-components/components/internal/Loading.vue","webpack:///./node_modules/@openeo/vue-components/components/internal/Loading.vue?a6ac","webpack:///./node_modules/@openeo/vue-components/components/internal/Loading.vue?8a25","webpack:///./node_modules/@openeo/vue-components/components/Tabs.vue?eec1","webpack:///./node_modules/@openeo/vue-components/components/internal/Errored.vue","webpack:///node_modules/@openeo/vue-components/components/internal/Errored.vue","webpack:///./node_modules/@openeo/vue-components/components/internal/Errored.vue?88f4","webpack:///./node_modules/@openeo/vue-components/components/internal/Errored.vue?5819","webpack:///./node_modules/@openeo/vue-components/utils.js","webpack:///./node_modules/@radiantearth/stac-migrate/migrate.js","webpack:///./node_modules/@openeo/vue-components/components/Tab.vue","webpack:///node_modules/@openeo/vue-components/components/Tab.vue","webpack:///./node_modules/@openeo/vue-components/components/Tab.vue?2dd1","webpack:///./node_modules/@openeo/vue-components/components/Tab.vue?cda1","webpack:///./node_modules/@openeo/vue-components/components/internal/Loading.vue?6f7f","webpack:///./node_modules/@openeo/vue-components/components/Tabs.vue","webpack:///node_modules/@openeo/vue-components/components/Tabs.vue","webpack:///./node_modules/@openeo/vue-components/components/Tabs.vue?13d2","webpack:///./node_modules/@openeo/vue-components/components/Tabs.vue?1a86"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticClass","_v","name","component","str","replace","_","c","toUpperCase","vm","isObject","$root","$options","shadowRoot","document","readyState","readHtmlProps","addEventListener","enableHtmlProps","once","$slots","Array","isArray","default","slots","filter","slot","tag","data","attrs","type","includes","prop","length","kebabToCamelCase","value","JSON","parse","domProps","innerHTML","setProp","key","console","error","message","webComponent","stylesheets","from","styleSheets","css","href","font","createElement","as","crossOrigin","head","appendChild","rel","media","propsRef","$props","propsData","$set","importer","loading","Loading","Errored","delay","timeout","schema","signature","similarAllowed","level","schemaObj","types","Set","i","schemas","dt","native","nativeDataType","dataType","isEditable","other","add","formatted","items","arrayItems","has","join","String","count","obj","force","countedKeys","countObjectKeys","Object","keys","num","sum","avg","dataSize","onlyHttp","hasText","url","URL","protocol","match","pt","fallback","isRef","from_node","from_parameter","ref1","ref2","coordinates","geometries","geometry","properties","features","parameters","processParameters","param","omitFromObject","push","description","optional","required","sort","a","b","compareStringCaseInsensitive","amount","currency","toLocaleString","undefined","style","maximumFractionDigits","trim","budget","unlimited","formatCurrency","Date","timeZone","timeZoneName","units","Math","floor","log","size","pow","sizeStr","process","html","params","pStr","p","pType","req","pDefault","stringify","htmlentities","paramStr","returnSchema","returns","id","searchterm","target","and","values","splitChars","toLowerCase","split","s","fn","term","compareVersions","LATEST_VERSION","DONE","SCHEMAS","EXTENSIONS","itemAndCollection","datacube","eo","file","label","pointcloud","processing","projection","raster","sar","sat","scientific","view","version","timestamps","catalog","collection","item","assign","V","compare","val","oldKey","newKey","newKeys","summary","valueToRemove","index","indexOf","splice","valueToAdd","defaultValue","context","newExtension","addToArrayIfNotExists","oldExtension","removeFromArray","oldShortnames","newSchemas","mapValues","objectsToCheck","assets","concat","item_assets","summaries","forEach","prefix","ext","is","addExtension","oldValues","newValues","map","fromSummary","mergedSummary","condition","isDefined","migrations","startsWith","toISOString","date","Checksum","hexString","Error","Uint8Array","byte","parseInt","bytes","reduce","toString","padStart","algo","multihash","encoded","encode","hexToUint8","uint8ToHex","warn","Catalog","updateVersionNumber","set","stac_version","before","migrateExtensionShortnames","ensure","runAll","populateExtensions","rename","Collection","migrate","spatial","bbox","temporal","interval","extent","min","max","start","end","unshift","union","fill","middle","findIndex","removeExtension","Asset","migrateAll","other_properties","minimum","maximum","v","links","find","link","mapObject","Fields","moveTo","Item","commons","field","asset","bands","band","toUTC","toMultihash","toArray","flattenArray","flattenOneElementArray","Migrate","object","license","module","exports","directives","rawName","enabled","active","expression","_t","props","icon","selected","closable","allowShow","beforeCreate","Utils","mounted","watch","methods","updateState","getTabs","parent","class","classes","hasEnabledTabs","_e","ref","_l","tabs","tab","tabItem","tabActive","tabHasIcon","on","$event","_k","keyCode","button","selectTab","closeTab","_s","preventDefault","stopPropagation","dynamicTabs","onDynamicAllowShow","onDynamic","components","Tab","pills","pillsMultiline","position","tabIdCounter","activeTab","spaceLimited","computed","addTab","show","hide","close","adjustSizes","getTab","getActiveTab","getActiveTabId","selectedTab","resetActiveTab"],"mappings":"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","file":"js/chunk-vendors~398f8675.0d1b575f.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"vue-component loading-notice\"},[_c('span',{staticClass:\"loading\"},[_vm._v(\"Loading\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"vue-component loading-notice\">\r\n\t\t<span class=\"loading\">Loading</span>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'Loading'\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.vue-component.loading-notice {\r\n\t.loading:after {\r\n\t\tcontent: '.';\r\n\t\tanimation: dots 1.25s steps(5, end) infinite;\r\n\t\tfont-size: 1.5em;\r\n\t\tline-height: 1em;\r\n\t\tfont-weight: bold;\r\n\t}\r\n}\r\n\r\n@keyframes dots {\r\n\t0%, 20% {\r\n\t\tcolor: rgba(0,0,0,0);\r\n\t\ttext-shadow:\r\n\t\t\t.25em 0 0 rgba(0,0,0,0),\r\n\t\t\t.5em 0 0 rgba(0,0,0,0);\r\n\t\t}\r\n\t40% {\r\n\t\tcolor: black;\r\n\t\ttext-shadow:\r\n\t\t\t.25em 0 0 rgba(0,0,0,0),\r\n\t\t\t.5em 0 0 rgba(0,0,0,0);\r\n\t}\r\n\t60% {\r\n\t\ttext-shadow:\r\n\t\t\t.25em 0 0 black,\r\n\t\t\t.5em 0 0 rgba(0,0,0,0);\r\n\t}\r\n\t80%, 100% {\r\n\t\ttext-shadow:\r\n\t\t\t.25em 0 0 black,\r\n\t\t\t.5em 0 0 black;\r\n\t}\r\n}\r\n</style>","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--13-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--13-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=0106aa0f&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=0106aa0f&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=style&index=0&id=7f5bbce9&prod&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('p',{staticClass:\"vue-component component-error-notice\"},[_vm._v(\" Sorry, could not load user interface from server. Please try again. \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<p class=\"vue-component component-error-notice\">\r\n\t\tSorry, could not load user interface from server. Please try again.\r\n\t</p>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'Errored'\r\n}\r\n</script>","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--13-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Errored.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--13-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Errored.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Errored.vue?vue&type=template&id=5d748b24&\"\nimport script from \"./Errored.vue?vue&type=script&lang=js&\"\nexport * from \"./Errored.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Utils as CommonUtils, ProcessSchema } from '@openeo/js-commons';\r\nimport Loading from './components/internal/Loading.vue';\r\nimport Errored from './components/internal/Errored.vue';\r\n\r\nclass Utils extends CommonUtils {\r\n\r\n\tstatic kebabToCamelCase(str) {\r\n\t\treturn str.replace(/-(\\w)/g, (_, c) => c ? c.toUpperCase() : '');\r\n\t}\r\n\r\n\tstatic enableHtmlProps(vm) {\r\n\t\t// Don't execute if not in web-component mode (i.e. check for the shadow root)\r\n\t\tif (!Utils.isObject(vm.$root) || !vm.$root.$options.shadowRoot) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Read the HTML props once the page is completely loaded and all props are completely available\r\n\t\tif(document.readyState === 'complete') {\r\n\t\t\tUtils.readHtmlProps(vm);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdocument.addEventListener('readystatechange', () => Utils.enableHtmlProps(vm), {once: true});\r\n\t\t}\r\n\t}\r\n\r\n\tstatic readHtmlProps(vm) {\r\n\t\tif (!Utils.isObject(vm) || !Utils.isObject(vm.$slots) || !Array.isArray(vm.$slots.default)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Read script tags\r\n\t\tlet slots = vm.$slots.default.filter(slot => typeof slot.tag === 'string' && slot.tag.toUpperCase() === 'SCRIPT' && typeof slot.data.attrs.type === 'string' && slot.data.attrs.type.includes('application/json'));\r\n\t\t// We are using `includes` here as for some strange reasons in Jupyter Notebooks subsequent re-renders of the cell\r\n\t\t// result in the attribute value being prefixed by a \"true/\", i.e.the value in slot.data.attrs.type is \"true/application/json\".\r\n\t\tfor(let slot of slots) {\r\n\t\t\tlet prop = null;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof slot.data.attrs.prop === 'string' && slot.data.attrs.prop.length > 0) {\r\n\t\t\t\t\tprop = Utils.kebabToCamelCase(slot.data.attrs.prop);\r\n\t\t\t\t}\r\n\t\t\t\tlet value = JSON.parse(slot.data.domProps.innerHTML);\r\n\t\t\t\tif (prop) {\r\n\t\t\t\t\tUtils.setProp(vm, prop, value); // Set a single prop\r\n\t\t\t\t}\r\n\t\t\t\telse if (Utils.isObject(value)) {\r\n\t\t\t\t\tfor(let key in value) { // Set all props\r\n\t\t\t\t\t\tUtils.setProp(vm, key, value[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(`Props passed via script tag must be contained in an object.`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (error) {\r\n\t\t\t\tif (prop) {\r\n\t\t\t\t\tconsole.error(`Prop '${prop}' passed via script tag is invalid: ${error.message}`);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.error(`Props passed via script tag are invalid: ${error.message}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic loadFontAwesome(vm) {\r\n\t\tlet webComponent = Utils.isObject(vm.$root) && vm.$root.$options.shadowRoot;\r\n\r\n\t\tlet stylesheets = Array.from((webComponent || document).styleSheets);\r\n\t\tfor(let css of stylesheets) {\r\n\t\t\tif (typeof css.href === 'string' && css.href.includes('fontawesome')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Don't execute if not in web-component mode (browsers don't support loading fonts in shadowroot)\r\n\t\tif (!webComponent) {\r\n\t\t\tlet font = document.createElement('link');\r\n\t\t\tfont.as = \"font\";\r\n\t\t\tfont.type = \"font/woff2\";\r\n\t\t\tfont.crossOrigin = true;\r\n\t\t\tfont.href = \"https://use.fontawesome.com/releases/v5.13.0/webfonts/fa-solid-900.woff2\";\r\n\t\t\tdocument.head.appendChild(font);\r\n\t\t}\r\n\r\n\t\tlet css = document.createElement('link');\r\n\t\tcss.rel = \"stylesheet\";\r\n\t\tcss.type = \"text/css\";\r\n\t\tcss.media = \"all\";\r\n\t\tcss.href = \"https://use.fontawesome.com/releases/v5.13.0/css/all.css\";\r\n\t\t(webComponent || document.head).appendChild(css);\r\n\t}\r\n\r\n\tstatic setProp(vm, prop, value) {\r\n\t\t// Depending on when during the page load this is executed, we\r\n\t\t// need either to populate propsData (initially available) or\r\n\t\t// $props (available after propsData has been read).\r\n\t\tlet propsRef = Utils.isObject(vm.$props) ? vm.$props : vm.$options.propsData;\r\n\t\tvm.$set(propsRef, Utils.kebabToCamelCase(prop), value);\r\n\t}\r\n\r\n\tstatic loadAsyncComponent(importer) {\r\n\t\treturn {\r\n\t\t\tcomponent: importer,\r\n\t\t\tloading: Loading,\r\n\t\t\terror: Errored,\r\n\t\t\tdelay: 0,\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t}\r\n\r\n\tstatic dataType(schema, signature = false, similarAllowed = 2, level = 0) {\r\n\t\tlet schemaObj = new ProcessSchema(schema);\r\n\t\tvar types = new Set();\r\n\t\tfor(let i in schemaObj.schemas) {\r\n\t\t\tlet dt = schemaObj.schemas[i];\r\n\t\t\tlet native = dt.nativeDataType();\r\n\t\t\tlet type = dt.dataType();\r\n\t\t\t// Make the data types that we can submit via JSON (e.g. raster-cube, labeled-array) native\r\n\t\t\tif (!dt.isEditable()) {\r\n\t\t\t\tnative = type;\r\n\t\t\t}\r\n\t\t\telse if (signature && schemaObj.schemas.filter(other => other.nativeDataType() === native).length > similarAllowed) {\r\n\t\t\t\t// For signatures only: Check whether another similar type is available, then show only native type\r\n\t\t\t\ttypes.add(native);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet formatted = native === type ? type : `${type}:${native}`;\r\n\t\t\tif (native === 'array' && Utils.isObject(dt.schema.items)) {\r\n\t\t\t\tlet arrayItems = Utils.dataType(dt.schema.items, signature, similarAllowed, level + 1);\r\n\t\t\t\tif (arrayItems !== 'any') {\r\n\t\t\t\t\tformatted += `<${arrayItems}>`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttypes.add(formatted);\r\n\t\t}\r\n\t\tif (types.has('any')) {\r\n\t\t\treturn 'any';\r\n\t\t}\r\n\t\treturn Array.from(types).join(signature || level > 0 ? '|' : ', ');\r\n\t}\r\n\r\n\tstatic htmlentities_decode(str) {\r\n\t\tif (typeof str !== 'string') {\r\n\t\t\tstr = String(str);\r\n\t\t}\r\n\t\treturn str.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\").replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\");\r\n\t}\r\n\r\n\tstatic htmlentities(str) {\r\n\t\tif (typeof str !== 'string') {\r\n\t\t\tstr = String(str);\r\n\t\t}\r\n\t\treturn str.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, '&apos;');\r\n\t}\r\n\t\r\n\tstatic countObjectKeys(data) {\r\n\t\tvar count = {};\r\n\t\tfor(var i in data) {\r\n\t\t\tvar obj = data[i];\r\n\t\t\tif (typeof obj !== 'object' || obj === null || Array.isArray(obj)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tfor(var key in obj) {\r\n\t\t\t\tif (typeof count[key] === 'undefined') {\r\n\t\t\t\t\tcount[key] = 1;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcount[key]++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\r\n\tstatic isTableLike(data, force = false) {\r\n\t\tif (typeof data !== 'object' || data === null) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tvar countedKeys = Utils.countObjectKeys(data);\r\n\t\tif (countedKeys !== null) {\r\n\t\t\tif (force === true) {\r\n\t\t\t\treturn Object.keys(countedKeys);\r\n\t\t\t}\r\n\t\t\tvar num = 0;\r\n\t\t\tvar sum = 0;\r\n\t\t\tfor (var i in countedKeys) {\r\n\t\t\t\tnum++;\r\n\t\t\t\tsum += countedKeys[i];\r\n\t\t\t}\r\n\r\n\t\t\tvar avg = sum / num;\r\n\t\t\tvar dataSize = Array.isArray(dataSize) ? data.length : Object.keys(data).length;\r\n\t\t\tif (avg > dataSize/2) {\r\n\t\t\t\treturn Object.keys(countedKeys);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [];\r\n\t}\r\n\r\n\tstatic isUrl(value, onlyHttp = true) {\r\n\t\tif (!Utils.hasText(value)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tlet url = new URL(value);\r\n\t\t\tif (onlyHttp && !url.protocol.match(/^https?:$/i)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic prettifyAbbreviation(str) {\r\n\t\tif (typeof str === 'string' && str.match(/[A-Z]+/) === null) {\r\n\t\t\treturn str.toUpperCase();\r\n\t\t}\r\n\t\treturn str;\r\n\t}\r\n\t\r\n\tstatic ensurePoint(pt, fallback = null) {\r\n\t\tif (typeof fallback !== 'function') {\r\n\t\t\tfallback = () => [0,0];\r\n\t\t}\r\n\t\tif (!Array.isArray(pt)) {\r\n\t\t\treturn fallback();\r\n\t\t}\r\n\t\tif (typeof pt[0] !== 'number') {\r\n\t\t\tpt[0] = fallback()[0] || 0;\r\n\t\t}\r\n\t\tif (typeof pt[1] !== 'number') {\r\n\t\t\tpt[1] = fallback()[1] || 0;\r\n\t\t}\r\n\t\treturn pt;\r\n\t}\r\n\t\r\n\tstatic formatRef(value) {\r\n\t\tif (this.isRef(value)) {\r\n\t\t\tif (value.from_node) {\r\n\t\t\t\treturn \"#\" + value.from_node;\r\n\t\t\t}\r\n\t\t\telse if (value.from_parameter) {\r\n\t\t\t\treturn \"$\" + value.from_parameter;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic isRef(obj) {\r\n\t\treturn (Utils.isObject(obj) && (obj.from_parameter || obj.from_node));\r\n\t}\r\n\r\n\tstatic isRefEqual(ref1, ref2) {\r\n\t\tif (!Utils.isRef(ref1) || !Utils.isRef(ref2)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (ref1.from_parameter && ref1.from_parameter === ref2.from_parameter) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse if (ref1.from_node && ref1.from_node === ref2.from_node) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// A very rough GeoJSON detection, if no GeoJSON schema is available.\r\n\tstatic detectGeoJson(data) {\r\n\t\tif (!Utils.isObject(data)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (typeof data.type !== 'string') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tswitch(data.type) {\r\n\t\t\tcase \"Point\":\r\n\t\t\tcase \"MultiPoint\":\r\n\t\t\tcase \"LineString\":\r\n\t\t\tcase \"MultiLineString\":\r\n\t\t\tcase \"Polygon\":\r\n\t\t\tcase \"MultiPolygon\":\r\n\t\t\t\tif (!Array.isArray(data.coordinates)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\tcase \"GeometryCollection\":\r\n\t\t\t\tif (!Array.isArray(data.geometries)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\tcase \"Feature\":\r\n\t\t\t\tif (data.geometry !== null && !Utils.isObject(data.geometry)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (data.properties !== null && !Utils.isObject(data.properties)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\tcase \"FeatureCollection\":\r\n\t\t\t\tif (!Array.isArray(data.features)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic toProcessParameters(parameters) {\r\n\t\tif (Utils.isObject(parameters)) {\r\n\t\t\tlet processParameters = [];\r\n\t\t\tfor(let name in parameters) {\r\n\t\t\t\tlet param = parameters[name];\r\n\t\t\t\tlet schema = Utils.omitFromObject(param, ['description', 'required', 'default', 'federation:backends']);\r\n\t\t\t\tprocessParameters.push({\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tdescription: param.description,\r\n\t\t\t\t\toptional: !param.required,\r\n\t\t\t\t\tdefault: param.default,\r\n\t\t\t\t\t'federation:backends': param['federation:backends'],\r\n\t\t\t\t\tschema\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn processParameters.sort((a,b) => Utils.compareStringCaseInsensitive(a.name, b.name));\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic formatCurrency(amount, currency, fallback = '') {\r\n\t\tif (typeof amount !== 'number') {\r\n\t\t\treturn fallback;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\treturn amount.toLocaleString(undefined, { style: 'currency', currency: currency });\r\n\t\t} catch(error) {\r\n\t\t\tlet str = amount.toLocaleString(undefined, {maximumFractionDigits: 2});\r\n\t\t\tif (typeof currency === 'string') {\r\n\t\t\t\tstr += ' ';\r\n\t\t\t\tstr += currency;\r\n\t\t\t}\r\n\t\t\treturn str.trim();\r\n\t\t}\r\n\t}\r\n\r\n\tstatic formatBudget(budget, currency, unlimited = \"Unlimited\") {\r\n\t\tif (budget === null) {\r\n\t\t\treturn unlimited;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Utils.formatCurrency(budget, currency);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic formatTimestamp(value, fallback = 'n/a') {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\treturn new Date(value).toLocaleString(undefined, {\r\n\t\t\t\t\ttimeZone: \"UTC\",\r\n\t\t\t\t\ttimeZoneName: \"short\"\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {}\r\n\t\t}\r\n\t\treturn fallback;\r\n\t}\r\n\r\n\tstatic formatFileSize(value, fallback = 'n/a') {\r\n\t\tlet units = ['B', 'kB', 'MB', 'GB', 'TB', 'PB'];\r\n\t\tif (typeof value !== 'number') {\r\n\t\t\treturn fallback;\r\n\t\t}\r\n\t\tlet i = value == 0 ? 0 : Math.floor( Math.log(value) / Math.log(1024) );\r\n\t\tlet size = value / Math.pow(1024, i);\r\n\t\tlet sizeStr = size.toLocaleString(undefined, {maximumFractionDigits: 1});\r\n\t\treturn `${sizeStr} ${units[i]}`;\r\n\t}\r\n\r\n\tstatic formatProcessSignature(process, html = true) {\r\n\t\tlet params = [];\r\n\t\tif (Array.isArray(process.parameters)) {\r\n\t\t\tfor(let i in process.parameters) {\r\n\t\t\t\tlet p = process.parameters[i];\r\n\t\t\t\tlet pType = Utils.dataType(p.schema, true, 1);\r\n\t\t\t\tlet req = p.optional ? '?' : '';\r\n\t\t\t\tlet pDefault = '';\r\n\t\t\t\tif (p.optional && typeof p.default !== 'undefined') {\r\n\t\t\t\t\tpDefault = JSON.stringify(p.default);\r\n\t\t\t\t}\r\n\t\t\t\tlet pStr;\r\n\t\t\t\tif (html) {\r\n\t\t\t\t\tpStr = `<span class=\"param-optional\">${req}</span><span class=\"data-type\">${ Utils.htmlentities(pType) }</span> <span class=\"param-name\">${ Utils.htmlentities(p.name) }</span>`;\r\n\t\t\t\t\tif (pDefault) {\r\n\t\t\t\t\t\tif (pDefault.length > 30) {\r\n\t\t\t\t\t\t\tpDefault = `<span title=\"${ Utils.htmlentities(pDefault) }\">…</span>`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpStr += ` = <span class=\"param-argument\">${pDefault}</span>`;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tpStr = req + pType + \" \" + p.name + pDefault;\r\n\t\t\t\t}\r\n\t\t\t\tparams.push(pStr);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet paramStr = \"(\" + params.join(\", \") + \") : \";\r\n\r\n\t\tlet returnSchema = Utils.isObject(process.returns) && process.returns.schema && typeof process.returns.schema === 'object' ? process.returns.schema : {};\r\n\t\tlet returns = Utils.dataType(returnSchema, true, 2);\r\n\r\n\t\tif (html) {\r\n\t\t\treturn `<span class=\"process-name\">${ Utils.htmlentities(process.process.id) }</span>${paramStr}<span class=\"data-type\">${ Utils.htmlentities(returns) }</span>`;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn process.process.id + paramStr + returns;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic search(searchterm, target, and = true) {\r\n\t\tif (typeof searchterm !== 'string' || searchterm.length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (Utils.isObject(target)) {\r\n\t\t\ttarget = Object.values(target);\r\n\t\t}\r\n\t\telse if (typeof target === 'string') {\r\n\t\t\ttarget = [target];\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(target)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet splitChars = /[\\s\\.,;!&\\(\\{\\[\\)\\}\\]]+/g;\r\n\r\n\t\t// Prepare search terms\r\n\t\tsearchterm = searchterm.toLowerCase().split(splitChars);\r\n\r\n\t\t// Prepare text to search in\r\n\t\ttarget = target\r\n\t\t\t.filter(s => typeof s === 'string') // Remove non-strings\r\n\t\t\t.join(' ') // Merge into a single string\r\n\t\t\t.replace(splitChars, ' ') // replace split chars with white spaces\r\n\t\t\t.toLowerCase(); // Lowercase\r\n\r\n\t\t// Search with \"and\" or \"or\"\r\n\t\tlet fn = and ? 'every' : 'some';\r\n\t\treturn searchterm[fn](term => target.includes(term));\r\n\t}\r\n\r\n};\r\n\r\nexport default Utils;","// Migration rules partly based on PySTAC and @openeo/js-commons,\r\n// see https://github.com/stac-utils/pystac/tree/v0.5.4/pystac/serialization/migrate.py\r\n// and https://github.com/Open-EO/openeo-js-commons/tree/v1.2.0/src/migrate/collections.js\r\n\r\nvar compareVersions = require('compare-versions');\r\n\r\nconst LATEST_VERSION = '1.0.0';\r\nconst DONE = true; // This is used to verify in code coverage whether something has been used or not\r\nconst SCHEMAS = {\r\n\t'datacube': 'https://stac-extensions.github.io/datacube/v1.0.0/schema.json',\r\n\t'eo': 'https://stac-extensions.github.io/eo/v1.0.0/schema.json',\r\n\t'file': 'https://stac-extensions.github.io/file/v1.0.0/schema.json',\r\n\t'item-assets': 'https://stac-extensions.github.io/item-assets/v1.0.0/schema.json',\r\n\t'label': 'https://stac-extensions.github.io/label/v1.0.0/schema.json',\r\n\t'pointcloud': 'https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json',\r\n\t'processing': 'https://stac-extensions.github.io/processing/v1.0.0/schema.json',\r\n\t'projection': 'https://stac-extensions.github.io/projection/v1.0.0/schema.json',\r\n\t'raster': 'https://stac-extensions.github.io/raster/v1.0.0/schema.json',\r\n\t'sar': 'https://stac-extensions.github.io/sar/v1.0.0/schema.json',\r\n\t'sat': 'https://stac-extensions.github.io/sat/v1.0.0/schema.json',\r\n\t'scientific': 'https://stac-extensions.github.io/scientific/v1.0.0/schema.json',\r\n\t'timestamps': 'https://stac-extensions.github.io/timestamps/v1.0.0/schema.json',\r\n\t'version': 'https://stac-extensions.github.io/version/v1.0.0/schema.json',\r\n\t'view': 'https://stac-extensions.github.io/view/v1.0.0/schema.json'\r\n};\r\nconst EXTENSIONS = {\r\n\t// Add a : at the end to indicate it has a prefix, otherwise list all fields separately (see version extension for example).\r\n\titemAndCollection: {\r\n\t\t// with prefix\r\n\t\t'cube:': SCHEMAS.datacube,\r\n\t\t'eo:': SCHEMAS.eo,\r\n\t\t'file:': SCHEMAS.file,\r\n\t\t'label:': SCHEMAS.label,\r\n\t\t'pc:': SCHEMAS.pointcloud,\r\n\t\t'processing:': SCHEMAS.processing,\r\n\t\t'proj:': SCHEMAS.projection,\r\n\t\t'raster:': SCHEMAS.raster,\r\n\t\t'sar:': SCHEMAS.sar,\r\n\t\t'sat:': SCHEMAS.sat,\r\n\t\t'sci:': SCHEMAS.scientific,\r\n\t\t'view:': SCHEMAS.view,\r\n\t\t// without prefix\r\n\t\t'version': SCHEMAS.version,\r\n\t\t'deprecated': SCHEMAS.version,\r\n\t\t'published': SCHEMAS.timestamps,\r\n\t\t'expires': SCHEMAS.timestamps,\r\n\t\t'unpublished': SCHEMAS.timestamps\r\n\t},\r\n\tcatalog: {\r\n\t\t// None yet\r\n\t},\r\n\tcollection: {\r\n\t\t'item_assets': SCHEMAS['item-assets']\r\n\t},\r\n\titem: {\r\n\t\t// None yet\r\n\t},\r\n};\r\nEXTENSIONS.collection = Object.assign(EXTENSIONS.collection, EXTENSIONS.itemAndCollection);\r\nEXTENSIONS.item = Object.assign(EXTENSIONS.item, EXTENSIONS.itemAndCollection);\r\n\r\nvar V = {\r\n\tversion: LATEST_VERSION,\r\n\r\n\tset(version) {\r\n\t\tif (!version) {\r\n\t\t\tversion = '0.6.0'; // Assume the worst case, it doesn't seem there's a clear indicator for 0.7.0\r\n\t\t}\r\n\t\tV.version = version;\r\n\t},\r\n\r\n\tbefore(version) {\r\n\t\treturn compareVersions.compare(V.version, version, '<');\r\n\t}\r\n};\r\n\r\nvar _ = {\r\n\r\n\ttype(val) {\r\n\t\tlet type = typeof val;\r\n\t\tif (type === 'object') {\r\n\t\t\tif (val === null) {\r\n\t\t\t\treturn 'null';\r\n\t\t\t}\r\n\t\t\telse if (Array.isArray(val)) {\r\n\t\t\t\treturn 'array';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn type;\r\n\t},\r\n\r\n\tis(val, type) {\r\n\t\treturn (_.type(val) === type);\r\n\t},\r\n\r\n\tisDefined(val) {\r\n\t\treturn (typeof val !== 'undefined');\r\n\t},\r\n\r\n\tisObject(obj) {\r\n\t\treturn (typeof obj === 'object' && obj === Object(obj) && !Array.isArray(obj));\r\n\t},\r\n\r\n\trename(obj, oldKey, newKey) {\r\n\t\tif (typeof obj[oldKey] !== 'undefined' && typeof obj[newKey] === 'undefined') {\r\n\t\t\tobj[newKey] = obj[oldKey];\r\n\t\t\tdelete obj[oldKey];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\ttoArray(obj, key) {\r\n\t\tif (typeof obj[key] !== 'undefined' && !Array.isArray(obj[key])) {\r\n\t\t\tobj[key] = [obj[key]];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tflattenArray(obj, key, newKeys, summary = false) {\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tfor(let i in obj[key]) {\r\n\t\t\t\tif (typeof newKeys[i] === 'string') {\r\n\t\t\t\t\tlet value = obj[key][i];\r\n\t\t\t\t\tobj[newKeys[i]] = summary ? [value] : value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete obj[key];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tflattenOneElementArray(obj, key, summary = false) {\r\n\t\tif (!summary && Array.isArray(obj[key])) {\r\n\t\t\tif (obj[key].length === 1) {\r\n\t\t\t\tobj[key] = obj[key][0];\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn false; // It's still an array and we don't know which element to choose\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true; // It's already a single element\r\n\t},\r\n\r\n\tremoveFromArray(obj, key, valueToRemove) {\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tlet index = obj[key].indexOf(valueToRemove);\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tobj[key].splice(index, 1);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\taddToArrayIfNotExists(obj, key, valueToAdd) {\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tlet index = obj[key].indexOf(valueToAdd);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tobj[key].push(valueToAdd);\r\n\t\t\t}\r\n\t\t\tobj[key].sort();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tensure(obj, key, defaultValue) {\r\n\t\tif (_.type(defaultValue) !== _.type(obj[key])) {\r\n\t\t\tobj[key] = defaultValue;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\taddExtension(context, newExtension) {\r\n\t\tif (!_.isObject(context)) {\r\n\t\t\treturn true; // We are likely in summaries and don't need to do anything\r\n\t\t}\r\n\r\n\t\treturn _.addToArrayIfNotExists(context, 'stac_extensions', newExtension) && DONE;\r\n\t},\r\n\r\n\tremoveExtension(context, oldExtension) {\r\n\t\tif (!_.isObject(context)) {\r\n\t\t\treturn true; // We are likely in summaries and don't need to do anything\r\n\t\t}\r\n\r\n\t\treturn _.removeFromArray(context, 'stac_extensions', oldExtension) && DONE;\r\n\t},\r\n\r\n\tmigrateExtensionShortnames(context) {\r\n\t\tlet oldShortnames = Object.keys(SCHEMAS);\r\n\t\tlet newSchemas = Object.values(SCHEMAS);\r\n\t\treturn _.mapValues(context, 'stac_extensions', oldShortnames, newSchemas);\r\n\t},\r\n\r\n\tpopulateExtensions(context, type) {\r\n\t\tlet objectsToCheck = [];\r\n\t\tif (type == 'catalog' || type == 'collection') {\r\n\t\t\tobjectsToCheck.push(context);\r\n\t\t}\r\n\t\tif ((type == 'item' || type == 'collection') && _.isObject(context.assets)) {\r\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.assets));\r\n\t\t}\r\n\t\tif (type == 'collection' && _.isObject(context.item_assets)) {\r\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.item_assets));\r\n\t\t}\r\n\t\tif (type == 'collection' && _.isObject(context.summaries)) {\r\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.summaries));\r\n\t\t}\r\n\t\tif (type == 'item' && _.isObject(context.properties)) {\r\n\t\t\tobjectsToCheck.push(context.properties);\r\n\t\t}\r\n\r\n\t\tfor (let obj of objectsToCheck) {\r\n\t\t\tObject.keys(obj).forEach(key => {\r\n\t\t\t\tlet prefix = key.match(/^(\\w+:|[^:]+$)/i);\r\n\t\t\t\tif (Array.isArray(prefix)) {\r\n\t\t\t\t\tlet ext = EXTENSIONS[type][prefix[0]];\r\n\t\t\t\t\t_.is(ext, 'string') && _.addExtension(context, ext) && DONE;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tmapValues(obj, key, oldValues, newValues) {\r\n\t\tlet fn = value => {\r\n\t\t\tlet index = oldValues.indexOf(value);\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\treturn newValues[index];\r\n\t\t\t}\r\n\t\t\treturn value;\t\r\n\t\t};\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tobj[key] = obj[key].map(fn);\r\n\t\t}\r\n\t\telse if (typeof obj[key] !== 'undefined') {\r\n\t\t\tobj[key] = fn(obj[key]);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tmapObject(obj, fn) {\r\n\t\tfor(let key in obj) {\r\n\t\t\tobj[key] = fn(obj[key], key);\r\n\t\t}\r\n\t},\r\n\r\n\tmoveTo(obj, key, context, fromSummary = false, mergedSummary = false) {\r\n\t\tlet condition;\r\n\t\tif (fromSummary) {\r\n\t\t\tif (mergedSummary) {\r\n\t\t\t\tcondition = val => Array.isArray(val);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcondition = val => Array.isArray(val) && val.length === 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcondition = _.isDefined\r\n\t\t}\r\n\t\tif (condition(obj[key])) {\r\n\t\t\tcontext[key] = fromSummary && !mergedSummary ? obj[key][0] : obj[key];\r\n\t\t\tdelete obj[key];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\trunAll(migrations, obj, context = null) {\r\n\t\tfor(let fn in migrations) {\r\n\t\t\tif (!fn.startsWith('migrate')) {\r\n\t\t\t\tmigrations[fn](obj, context);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\ttoUTC(obj, key) {\r\n\t\tif (typeof obj[key] === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tobj[key] = this.toISOString(obj[key]);\r\n\t\t\t\treturn true;\r\n\t\t\t} catch(error) {}\r\n\t\t}\r\n\t\tdelete obj[key];\r\n\t\treturn false;\r\n\t},\r\n\r\n\ttoISOString(date) {\r\n\t\tif (!(date instanceof Date)) {\r\n\t\t\tdate = new Date(date);\r\n\t\t}\r\n\t\treturn date.toISOString().replace('.000', ''); // Don't export milliseconds if not needed\r\n\t}\r\n\r\n};\r\n\r\nvar Checksum = {\r\n\r\n\thexToUint8(hexString) {\r\n\t\tif(hexString.length === 0 || hexString.length % 2 !== 0){\r\n\t\t\tthrow new Error(`The string \"${hexString}\" is not valid hex.`)\r\n\t\t}\r\n  \t\treturn new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\r\n\t},\r\n\r\n\tuint8ToHex(bytes) {\r\n\t\treturn bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\r\n\t},\r\n\r\n\ttoMultihash(obj, key, algo) {\r\n\t\tif (!_.is(obj[key], 'string')) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst multihash = require('multihashes');\r\n\t\t\tconst encoded = multihash.encode(Checksum.hexToUint8(obj[key]), algo);\r\n\t\t\tobj[key] = Checksum.uint8ToHex(encoded);\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.warn(error);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nvar Catalog = {\r\n\r\n\tmigrate(catalog, updateVersionNumber = true) {\r\n\t\tV.set(catalog.stac_version);\r\n\t\tif (updateVersionNumber) {\r\n\t\t\tcatalog.stac_version = LATEST_VERSION;\r\n\t\t}\r\n\t\tcatalog.type = 'Catalog';\r\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(catalog) && DONE;\r\n\r\n\t\t_.ensure(catalog, 'id', '') && DONE;\r\n\t\t_.ensure(catalog, 'description', '') && DONE;\r\n\t\t_.ensure(catalog, 'links', []) && DONE;\r\n\r\n\t\t_.runAll(Catalog, catalog, catalog);\r\n\r\n\t\t_.ensure(catalog, 'stac_extensions', []) && DONE;\r\n\t\tV.before('0.8.0') && _.populateExtensions(catalog, 'catalog') && DONE;\r\n\t},\r\n\r\n\topeneo(obj) {\r\n\t\t_.rename(obj, 'api_version', 'openeo:api_version') && DONE;\r\n\t\t_.rename(obj, 'backend_version', 'openeo:backend_version') && DONE;\r\n\t\t_.rename(obj, 'production', 'openeo:production') && DONE;\r\n\t\t_.rename(obj, 'endpoints', 'openeo:endpoints') && DONE;\r\n\t\t_.rename(obj, 'billing', 'openeo:billing') && DONE;\r\n\t},\r\n\r\n};\r\n\r\nvar Collection = {\r\n\r\n\tmigrate(collection, updateVersionNumber = true) {\r\n\t\tCatalog.migrate(collection, updateVersionNumber); // Migrates stac_version, stac_extensions, id, title, description, links\r\n\t\tcollection.type = 'Collection';\r\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(collection) && DONE;\r\n\r\n\t\t_.ensure(collection, 'license', 'proprietary') && DONE;\r\n\t\t_.ensure(collection, 'extent', {\r\n\t\t\tspatial: {\r\n\t\t\t\tbbox: []\r\n\t\t\t},\r\n\t\t\ttemporal: {\r\n\t\t\t\tinterval: []\r\n\t\t\t}\r\n\t\t}) && DONE;\r\n\r\n\t\t_.runAll(Collection, collection, collection);\r\n\r\n\t\t// Migrate Commons extension - part 3\r\n\t\tif (_.isObject(collection.properties)) {\r\n\t\t\t_.removeFromArray(collection, 'stac_extensions', 'commons') && DONE;\r\n\t\t\tdelete collection.properties;\r\n\t\t}\r\n\r\n\t\tV.before('0.8.0') && _.populateExtensions(collection, 'collection') && DONE;\r\n\t\tV.before('1.0.0-beta.1') && _.mapValues(collection, 'stac_extensions', ['assets'], ['item-assets']) && DONE;\r\n\t},\r\n\r\n\textent(collection) {\r\n\t\t_.ensure(collection, \"extent\", {});\r\n\r\n\t\tif (V.before('0.8.0')) {\r\n\t\t\t// Restructure spatial extent\r\n\t\t\tif (Array.isArray(collection.extent.spatial)) {\r\n\t\t\t\tcollection.extent.spatial = {\r\n\t\t\t\t\tbbox: [\r\n\t\t\t\t\t\tcollection.extent.spatial\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// Restructure temporal extent\r\n\t\t\tif (Array.isArray(collection.extent.temporal)) {\r\n\t\t\t\tcollection.extent.temporal = {\r\n\t\t\t\t\tinterval: [\r\n\t\t\t\t\t\tcollection.extent.temporal\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_.ensure(collection.extent, \"spatial\", {});\r\n\t\t_.ensure(collection.extent.spatial, \"bbox\", []);\r\n\t\t_.ensure(collection.extent, \"temporal\", {});\r\n\t\t_.ensure(collection.extent.temporal, \"interval\", []);\r\n\r\n\t\tif (V.before('1.0.0-rc.3')) {\r\n\t\t\t// The first extent in a Collection is always the overall extent, followed by more specific extents.\r\n\t\t\tif (collection.extent.temporal.interval.length > 1) {\r\n\t\t\t\tlet min, max;\r\n\t\t\t\tfor(let interval of collection.extent.temporal.interval) {\r\n\t\t\t\t\tif (interval[0] === null) {\r\n\t\t\t\t\t\tmin = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof interval[0] === 'string' && min !== null) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tlet start = new Date(interval[0]);\r\n\t\t\t\t\t\t\tif (typeof min === 'undefined' || start < min) {\r\n\t\t\t\t\t\t\t\tmin = start;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (interval[1] === null) {\r\n\t\t\t\t\t\tmax = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof interval[1] === 'string' && max !== null) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tlet end = new Date(interval[1]);\r\n\t\t\t\t\t\t\tif (typeof max === 'undefined' || end > max) {\r\n\t\t\t\t\t\t\t\tmax = end;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\t\t\t\tcollection.extent.temporal.interval.unshift([\r\n\t\t\t\t\tmin ? _.toISOString(min) : null,\r\n\t\t\t\t\tmax ? _.toISOString(max) : null\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\tif (collection.extent.spatial.bbox.length > 1) {\r\n\t\t\t\tlet count = collection.extent.spatial.bbox.reduce((val, bbox) => Array.isArray(bbox) ? Math.max(bbox.length, val) : val, 4);\r\n\t\t\t\tif (count >= 4) {\r\n\t\t\t\t\tlet union = new Array(count).fill(null);\r\n\t\t\t\t\tlet middle = count / 2;\r\n\t\t\t\t\tfor(let bbox of collection.extent.spatial.bbox) {\r\n\t\t\t\t\t\tif (!Array.isArray(bbox) || bbox.length < 4) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor(let i in bbox) {\r\n\t\t\t\t\t\t\tlet c = bbox[i];\r\n\t\t\t\t\t\t\tif (union[i] === null) {\r\n\t\t\t\t\t\t\t\tunion[i] = c;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (i < middle) {\r\n\t\t\t\t\t\t\t\tunion[i] = Math.min(c, union[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tunion[i] = Math.max(c, union[i]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (union.findIndex(c => c === null) === -1) {\r\n\t\t\t\t\t\tcollection.extent.spatial.bbox.unshift(union);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcollectionAssets(collection) {\r\n\t\tV.before('1.0.0-rc.1') && _.removeExtension(collection, 'collection-assets') && DONE;\r\n\r\n\t\tAsset.migrateAll(collection);\r\n\t},\r\n\r\n\titemAsset(collection) {\r\n\t\tV.before('1.0.0-beta.2') && _.rename(collection, 'item_assets', 'assets');\r\n\r\n\t\tAsset.migrateAll(collection, 'item_assets');\r\n\t},\r\n\r\n\tsummaries(collection) {\r\n\t\t_.ensure(collection, 'summaries', {});\r\n\r\n\t\t// other_properties: An early version of the Collection summaries with a similar structure\r\n\t\t// Was mostly used in standalone collctions from openEO and GEE. Move other_properties to summaries.\r\n\t\tif (V.before('0.8.0') && _.isObject(collection.other_properties)) {\r\n\t\t\tfor(let key in collection.other_properties) {\r\n\t\t\t\tlet prop = collection.other_properties[key];\r\n\t\t\t\tif (Array.isArray(prop.extent) && prop.extent.length === 2) {\r\n\t\t\t\t\tcollection.summaries[key] = {\r\n\t\t\t\t\t\tminimum: prop.extent[0],\r\n\t\t\t\t\t\tmaximum: prop.extent[1],\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\telse if (Array.isArray(prop.values)) {\r\n\t\t\t\t\tif (prop.values.filter(v => Array.isArray(v)).length === prop.values.length) {\r\n\t\t\t\t\t\t// If it is an array of arrays, merge the arrays\r\n\t\t\t\t\t\tcollection.summaries[key] = prop.values.reduce((a, b) => a.concat(b), []);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcollection.summaries[key] = prop.values;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete collection.other_properties;\r\n\t\t}\r\n\r\n\t\t// Migrate Commons extension - part 2\r\n\t\t// Move properties to (single element) summaries if the Collection is standalone\r\n\t\t// see also https://github.com/stac-utils/stac-migrate/issues/3\r\n\t\tif (V.before('1.0.0-beta.1') && _.isObject(collection.properties) && !collection.links.find(link => ['child', 'item'].includes(link.rel))) {\r\n\t\t\tfor(let key in collection.properties) {\r\n\t\t\t\tlet value = collection.properties[key];\r\n\t\t\t\tif (!Array.isArray(value)) {\r\n\t\t\t\t\tvalue = [value];\r\n\t\t\t\t}\r\n\t\t\t\tcollection.summaries[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (V.before('1.0.0-rc.1')) {\r\n\t\t\t_.mapObject(collection.summaries, val => {\r\n\t\t\t\t_.rename(val, 'min', 'minimum') && DONE;\r\n\t\t\t\t_.rename(val, 'max', 'maximum') && DONE;\r\n\t\t\t\treturn val;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// now we can work on all summaries and migrate them\r\n\t\tFields.migrate(collection.summaries);\r\n\r\n\t\t// Some fields should usually be on root-level if there's only one element\r\n\t\t_.moveTo(collection.summaries, 'sci:doi', collection, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\r\n\t\t_.moveTo(collection.summaries, 'sci:publications', collection, true, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\r\n\t\t_.moveTo(collection.summaries, 'sci:citation', collection, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\r\n\t\t_.moveTo(collection.summaries, 'cube:dimensions', collection, true) && _.addExtension(collection, SCHEMAS.datacube) && DONE;\r\n\r\n\t\t// Remove summary field if empty\r\n\t\tif (Object.keys(collection.summaries).length === 0) {\r\n\t\t\tdelete collection.summaries;\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nvar Item = {\r\n\r\n\tmigrate(item, collection = null, updateVersionNumber = true) {\r\n\t\tV.set(item.stac_version);\r\n\t\tif (updateVersionNumber) {\r\n\t\t\titem.stac_version = LATEST_VERSION;\r\n\t\t}\r\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(item) && DONE;\r\n\r\n\t\t_.ensure(item, 'id', '') && DONE;\r\n\t\t_.ensure(item, 'type', 'Feature') && DONE;\r\n\t\tif (!_.isObject(item.geometry)) {\r\n\t\t\titem.geometry = null;\r\n\t\t}\r\n\t\tif (item.geometry !== null) {\r\n\t\t\t_.ensure(item, 'bbox', []) && DONE;\r\n\t\t}\r\n\t\t_.ensure(item, 'properties', {}) && DONE;\r\n\t\t_.ensure(item, 'links', []) && DONE;\r\n\t\t_.ensure(item, 'assets', {}) && DONE;\r\n\r\n\t\t// Migrate Commons extension - part 1\r\n\t\tlet commons = false;\r\n\t\tif (_.isObject(collection) && _.isObject(collection.properties)) {\r\n\t\t\t_.removeFromArray(item, 'stac_extensions', 'commons');\r\n\t\t\titem.properties = Object.assign({}, collection.properties, item.properties);\r\n\t\t\tcommons = true;\r\n\t\t}\r\n\r\n\t\t_.runAll(Item, item, item);\r\n\r\n\t\tFields.migrate(item.properties, item);\r\n\r\n\t\tAsset.migrateAll(item);\r\n\r\n\t\t_.ensure(item, 'stac_extensions', []) && DONE;\r\n\t\t// Also populate extensions if commons has been implemented\r\n\t\t(V.before('0.8.0') || commons) && _.populateExtensions(item, 'item') && DONE;\r\n\t}\r\n\r\n};\r\n\r\nvar Asset = {\r\n\r\n\tmigrateAll(context, field = 'assets') {\r\n\t\tfor(let key in context[field]) {\r\n\t\t\tAsset.migrate(context[field][key], context);\r\n\t\t}\r\n\t},\r\n\r\n\tmigrate(asset, context) {\r\n\t\t_.runAll(Asset, asset, context);\r\n\t\tFields.migrate(asset, context);\r\n\t},\r\n\r\n\tmediaTypes(asset) {\r\n\t\t_.is(asset.type, 'string') && _.mapValues(\r\n\t\t\tasset, 'type',\r\n\t\t\t['image/vnd.stac.geotiff', \t\t\t'image/vnd.stac.geotiff; cloud-optimized=true'],\r\n\t\t\t['image/tiff; application=geotiff',\t'image/tiff; application=geotiff; profile=cloud-optimized']\r\n\t\t);\r\n\t},\r\n\r\n\teo(asset, context) {\r\n\t\tlet bands = _.isObject(context.properties) && Array.isArray(context.properties['eo:bands']) ? context.properties['eo:bands'] : [];\r\n\t\tif (Array.isArray(asset['eo:bands'])) {\r\n\t\t\tfor(let i in asset['eo:bands']) {\r\n\t\t\t\tlet band = asset['eo:bands'][i];\r\n\t\t\t\tif (_.is(band, 'number') && _.isObject(bands[band])) {\r\n\t\t\t\t\tband = bands[band];\r\n\t\t\t\t}\r\n\t\t\t\telse if (!_.isObject(band)) {\r\n\t\t\t\t\tband = {}; // \"Fix\" invalid band index\r\n\t\t\t\t}\r\n\t\t\t\tasset['eo:bands'][i] = band;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nvar Fields = {\r\n\r\n\t// If no context is given, we are working in summaries\r\n\tmigrate(obj, context) {\r\n\t\t_.runAll(Fields, obj, context);\r\n\t},\r\n\r\n\t_commonMetadata(obj) {\r\n\t\t// Timestamps must be always in UTC\r\n\t\t// datetime, start_datetime and end_datetime already required UTC before\r\n\t\tif (V.before('1.0.0-rc.3')) {\r\n\t\t\t_.toUTC(obj, 'created') && DONE;\r\n\t\t\t_.toUTC(obj, 'updated') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\t_timestamps(obj) {\r\n\t\t// Timestamps must be always in UTC\r\n\t\t_.toUTC(obj, 'published') && DONE;\r\n\t\t_.toUTC(obj, 'expires') && DONE;\r\n\t\t_.toUTC(obj, 'unpublished') && DONE;\r\n\t},\r\n\r\n\t_versioningIndicator(obj) {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\tchecksum(obj, context) {\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'checksum:md5', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'md5') && DONE;\r\n\t\t\t_.rename(obj, 'checksum:sha1', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha1') && DONE;\r\n\t\t\t// We assume sha2/3-256 although that may fail in some cases and other lengths are chosen\r\n\t\t\t// Never seen this implemtned in the wild, so let's try this until another use case comes up\r\n\t\t\t_.rename(obj, 'checksum:sha2', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha2-256') && DONE;\r\n\t\t\t_.rename(obj, 'checksum:sha3', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha3-256') && DONE;\r\n\t\t}\r\n\r\n\t\tV.before('1.0.0-rc.1') && _.rename(obj, 'checksum:multihash', 'file:checksum') && _.addExtension(context, SCHEMAS.file) && DONE;\r\n\t},\r\n\r\n\tcube() {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\tdtr(obj, context) {\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'dtr:start_datetime', 'start_datetime') && DONE;\r\n\t\t\t_.rename(obj, 'dtr:end_datetime', 'end_datetime') && DONE;\r\n\t\t\t_.removeExtension(context, 'datetime-range') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\teo(obj, context) {\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'eo:epsg', 'proj:epsg') && _.addExtension(context, SCHEMAS.projection) && DONE;\r\n\t\t\t_.rename(obj, 'eo:platform', 'platform') && DONE;\r\n\t\t\t_.rename(obj, 'eo:instrument', 'instruments') && _.toArray(obj, 'instruments') && DONE;\r\n\t\t\t_.rename(obj, 'eo:constellation', 'constellation') && DONE;\r\n\t\t\t_.rename(obj, 'eo:off_nadir', 'view:off_nadir') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:azimuth', 'view:azimuth') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:incidence_angle', 'view:incidence_angle') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:sun_azimuth', 'view:sun_azimuth') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:sun_elevation', 'view:sun_elevation') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t}\r\n\r\n\t\tV.before('1.0.0-beta.1') && _.rename(obj, 'eo:gsd', 'gsd') && DONE;\r\n\t},\r\n\r\n\tlabel(obj) {\r\n\t\t// Migrate 0.8.0-rc1 non-pluralized forms\r\n\t\tif (V.before('0.8.0')) {\r\n\t\t\t_.rename(obj, 'label:property', 'label:properties') && DONE;\r\n\t\t\t_.rename(obj, 'label:task', 'label:tasks') && DONE;\r\n\t\t\t_.rename(obj, 'label:overview', 'label:overviews') && _.toArray(obj, 'label:overviews') && DONE;\r\n\t\t\t_.rename(obj, 'label:method', 'label:methods') && DONE;\r\n\t\t\t_.toArray(obj, 'label:classes') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\tpc(obj) {\r\n\t\tV.before('0.8.0') && _.rename(obj, 'pc:schema', 'pc:schemas') && DONE;\r\n\t},\r\n\r\n\tproj(obj) {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\tsar(obj, context) {\r\n\t\t// If no context is given, it's in summaries\r\n\t\tlet summary = !context;\r\n\r\n\t\t// Which version have they been (re)moved?\r\n\t\t_.rename(obj, 'sar:incidence_angle', 'view:incidence_angle') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t_.rename(obj, 'sar:pass_direction', 'sat:orbit_state') && _.mapValues(obj, 'sat:orbit_state', [null], ['geostationary']) && _.addExtension(context, SCHEMAS.sat) && DONE;\r\n\r\n\t\tif (V.before('0.7.0')) {\r\n\t\t\t_.flattenArray(obj, 'sar:resolution', ['sar:resolution_range', 'sar:resolution_azimuth'], summary) && DONE;\r\n\t\t\t_.flattenArray(obj, 'sar:pixel_spacing', ['sar:pixel_spacing_range', 'sar:pixel_spacing_azimuth'], summary) && DONE;\r\n\t\t\t_.flattenArray(obj, 'sar:looks', ['sar:looks_range', 'sar:looks_azimuth', 'sar:looks_equivalent_number'], summary) && DONE;\r\n\t\t\t_.rename(obj, 'sar:off_nadir', 'view:off_nadir') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t}\r\n\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'sar:platform', 'platform') && DONE;\r\n\t\t\t_.rename(obj, 'sar:instrument', 'instruments') && _.toArray(obj, 'instruments') && DONE;\r\n\t\t\t_.rename(obj, 'sar:constellation', 'constellation') && DONE;\r\n\t\t\t_.rename(obj, 'sar:type', 'sar:product_type') && DONE;\r\n\t\t\t_.rename(obj, 'sar:polarization', 'sar:polarizations') && DONE;\r\n\t\t\t_.flattenOneElementArray(obj, 'sar:absolute_orbit', summary) && _.rename(obj, 'sar:absolute_orbit', 'sat:absolute_orbit') && _.addExtension(context, SCHEMAS.sat) && DONE;\r\n\t\t\t_.flattenOneElementArray(obj, 'sar:relative_orbit', summary) && _.rename(obj, 'sar:relative_orbit', 'sat:relative_orbit') && _.addExtension(context, SCHEMAS.sat) && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\tsat(obj) {\r\n\t\t// Migrate 0.9.0-rc _angle suffixes\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'sat:off_nadir_angle', 'sat:off_nadir') && DONE;\r\n\t\t\t_.rename(obj, 'sat:azimuth_angle', 'sat:azimuth') && DONE;\r\n\t\t\t_.rename(obj, 'sat:sun_azimuth_angle', 'sat:sun_azimuth') && DONE;\r\n\t\t\t_.rename(obj, 'sat:sun_elevation_angle', 'sat:sun_elevation') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\tsci(obj) {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\titem(obj) { // Single Item\r\n\t\tif (V.before('0.8.0')) {\r\n\t\t\t_.rename(obj, 'item:license', 'license') && DONE;\r\n\t\t\t_.rename(obj, 'item:providers', 'providers') && DONE;\r\n\t\t\t// No need to remove the extension from stac_extensions as it was not available before 0.8.0\r\n\t\t}\r\n\t},\r\n\r\n\tview(obj) {\r\n\t\t// Nothing to do\r\n\t}\r\n\r\n};\r\n\r\nvar Migrate = {\r\n\r\n\titem(item, collection = null, updateVersionNumber = true) {\r\n\t\tItem.migrate(item, collection, updateVersionNumber);\r\n\t\treturn item;\r\n\t},\r\n\t\r\n\tcatalog(catalog, updateVersionNumber = true) {\r\n\t\tCatalog.migrate(catalog, updateVersionNumber);\r\n\t\treturn catalog;\r\n\t},\r\n\t\r\n\tcollection(collection, updateVersionNumber = true) {\r\n\t\tCollection.migrate(collection, updateVersionNumber);\r\n\t\treturn collection;\r\n\t},\r\n\t\r\n\tstac(object, updateVersionNumber = true) {\r\n\t\tif (object.type === 'Feature') {\r\n\t\t\treturn Migrate.item(object, null, updateVersionNumber);\r\n\t\t}\r\n\t\telse if (object.type === 'Collection' || _.isDefined(object.extent) || _.isDefined(object.license)) {\r\n\t\t\treturn Migrate.collection(object,  updateVersionNumber);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Migrate.catalog(object, updateVersionNumber);\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = Migrate;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.enabled && _vm.active),expression:\"enabled && active\"}],staticClass:\"tabContent\"},[_vm._t(\"default\",null,{\"tab\":this})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div v-show=\"enabled && active\" class=\"tabContent\">\r\n\t\t<slot :tab=\"this\"></slot>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Utils from '../utils';\r\n\r\nexport default {\r\n\tname: 'Tab',\r\n\tprops: {\r\n\t\tid: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tname: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\tselected: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tenabled: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tdata: {},\r\n\t\tclosable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tallowShow: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: null\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tactive: false\r\n\t\t};\r\n\t},\r\n\tbeforeCreate() {\r\n\t\tUtils.enableHtmlProps(this);\r\n\t},\r\n\tmounted() {\r\n\t\tthis.updateState();\r\n\t\tthis.$on('hide', () => this.active = false);\r\n\t\tthis.$on('show', () => this.active = true);\r\n\t\tif (this.icon) {\r\n\t\t\tUtils.loadFontAwesome(this);\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tselected() {\r\n\t\t\tthis.updateState();\r\n\t\t},\r\n\t\tenabled() {\r\n\t\t\tthis.updateState();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tupdateState() {\r\n\t\t\tthis.active = this.selected;\r\n\t\t\tif (this.enabled && this.active) {\r\n\t\t\t\tthis.getTabs().selectTab(this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.getTabs().resetActiveTab(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetTabs() {\r\n\t\t\tlet parent = this.$parent;\r\n\t\t\twhile(parent && parent.$options.name !== 'Tabs') {\r\n\t\t\t\tparent = parent.$parent;\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\t\t},\r\n\t\tasync canShow() {\r\n\t\t\tif (this.active) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse if (typeof this.allowShow !== 'function' || await this.allowShow(this)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!./Tab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!./Tab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tab.vue?vue&type=template&id=4a173e2c&\"\nimport script from \"./Tab.vue?vue&type=script&lang=js&\"\nexport * from \"./Tab.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../cache-loader/dist/cjs.js??ref--1-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=0106aa0f&prod&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:_vm.classes,attrs:{\"id\":_vm.id}},[(!_vm.hasEnabledTabs)?_c('div',{staticClass:\"tabsEmpty\"},[_vm._t(\"empty\")],2):_vm._e(),_c('div',{ref:\"tabsHeader\",staticClass:\"tabsHeader\"},_vm._l((_vm.tabs),function(tab){return _c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(tab.enabled),expression:\"tab.enabled\"}],key:tab.id,class:{tabItem: true, tabActive: tab.active, tabHasIcon: !!tab.icon, [tab.id]: true },attrs:{\"type\":\"button\",\"title\":tab.name},on:{\"click\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"]))return null;if('button' in $event && $event.button !== 0)return null;return _vm.selectTab(tab)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;return _vm.closeTab(tab)}}},[(tab.icon)?_c('i',{class:['tabIcon', 'fas', tab.icon]}):_vm._e(),_c('span',{staticClass:\"tabName\"},[_vm._t(\"tabName\",function(){return [_vm._v(_vm._s(tab.name))]},{\"tab\":tab})],2),(tab.closable)?_c('svg',{staticClass:\"tabClose\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"title\":\"Close\",\"viewBox\":\"0 0 24 24\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.closeTab(tab)}}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"11\",\"stroke\":\"black\",\"stroke-width\":\"2\",\"fill\":\"none\"}}),_c('path',{attrs:{\"stroke\":\"black\",\"stroke-width\":\"2\",\"fill\":\"none\",\"d\":\"M7,7,17,17\"}}),_c('path',{attrs:{\"stroke\":\"black\",\"stroke-width\":\"2\",\"fill\":\"none\",\"d\":\"M7,17,17,7\"}})]):_vm._e()])}),0),_c('div',{staticClass:\"tabsBody\"},[_vm._t(\"default\",null,{\"tabs\":this}),_vm._l((this.dynamicTabs),function(tab){return _c('Tab',{key:tab.id,attrs:{\"id\":tab.id,\"name\":tab.name,\"icon\":tab.icon,\"selected\":tab.selected,\"data\":tab.data,\"enabled\":tab.enabled,\"closable\":tab.closable,\"allowShow\":() => _vm.onDynamicAllowShow(tab)},on:{\"close\":function($event){return _vm.onDynamic(tab, 'close')},\"hide\":function($event){return _vm.onDynamic(tab, 'hide')},\"show\":function($event){return _vm.onDynamic(tab, 'show')}}},[_vm._t(tab.id,function(){return [_vm._t(\"dynamic\",null,{\"tab\":tab})]},{\"tab\":tab})],2)})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div :class=\"classes\" :id=\"id\">\r\n\t\t<div v-if=\"!hasEnabledTabs\" class=\"tabsEmpty\"><slot name=\"empty\"></slot></div>\r\n\t\t<div class=\"tabsHeader\" ref=\"tabsHeader\">\r\n\t\t\t<button v-for=\"tab in tabs\" type=\"button\" v-show=\"tab.enabled\" :class=\"{tabItem: true, tabActive: tab.active, tabHasIcon: !!tab.icon, [tab.id]: true }\" @click.left=\"selectTab(tab)\" @click.middle=\"closeTab(tab)\" :title=\"tab.name\" :key=\"tab.id\">\r\n\t\t\t\t<i v-if=\"tab.icon\" :class=\"['tabIcon', 'fas', tab.icon]\"></i>\r\n\t\t\t\t<span class=\"tabName\"><slot name=\"tabName\" :tab=\"tab\">{{ tab.name }}</slot></span>\r\n\t\t\t\t<svg v-if=\"tab.closable\" xmlns=\"http://www.w3.org/2000/svg\" class=\"tabClose\" title=\"Close\" @click.prevent.stop=\"closeTab(tab)\" viewBox=\"0 0 24 24\">\r\n\t\t\t\t\t<circle cx=\"12\" cy=\"12\" r=\"11\" stroke=\"black\" stroke-width=\"2\" fill=\"none\" />\r\n\t\t\t\t\t<path stroke=\"black\" stroke-width=\"2\" fill=\"none\" d=\"M7,7,17,17\" />\r\n\t\t\t\t\t<path stroke=\"black\" stroke-width=\"2\" fill=\"none\" d=\"M7,17,17,7\" />\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"tabsBody\">\r\n\t\t\t<slot :tabs=\"this\"></slot>\r\n\t\t\t<Tab v-for=\"tab in this.dynamicTabs\" :id=\"tab.id\" :name=\"tab.name\" :icon=\"tab.icon\" :selected=\"tab.selected\" :data=\"tab.data\" :enabled=\"tab.enabled\" :closable=\"tab.closable\" @close=\"onDynamic(tab, 'close')\" @hide=\"onDynamic(tab, 'hide')\" @show=\"onDynamic(tab, 'show')\" :allowShow=\"() => onDynamicAllowShow(tab)\" :key=\"tab.id\">\r\n\t\t\t\t<slot :name=\"tab.id\" :tab=\"tab\"><slot name=\"dynamic\" :tab=\"tab\"></slot></slot>\r\n\t\t\t</Tab>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Tab from './Tab.vue';\r\nimport Utils from '../utils';\r\n\r\nexport default {\r\n\tname: \"Tabs\",\r\n\tcomponents: {\r\n\t\tTab\r\n\t},\r\n\tprops: {\r\n\t\tid: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tpills: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tpillsMultiline: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tposition: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'top'\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttabIdCounter: 0,\r\n\t\t\ttabs: [],\r\n\t\t\tactiveTab: null,\r\n\t\t\tdynamicTabs: [],\r\n\t\t\tspaceLimited: false\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tif (Array.isArray(this.$children)) {\r\n\t\t\tthis.tabs = this.$children;\r\n\t\t\tlet activeTabs = this.tabs.filter(tab => tab.active === true);\r\n\t\t\tif (activeTabs.length === 1) {\r\n\t\t\t\tthis.activeTab = activeTabs[0];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.resetActiveTab();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.$root.$on('windowResized', this.adjustSizes);\r\n\t\tthis.$nextTick(this.adjustSizes);\r\n\t},\r\n\tcomputed: {\r\n\t\thasEnabledTabs() {\r\n\t\t\treturn this.tabs.filter(t => t.enabled).length > 0;\r\n\t\t},\r\n\t\tclasses() {\r\n\t\t\tvar classes = [\r\n\t\t\t\t'vue-component',\r\n\t\t\t\t'tabs',\r\n\t\t\t\tthis.pills ? 'pills' : 'boxed',\r\n\t\t\t\tthis.position\r\n\t\t\t];\r\n\t\t\tif (!this.hasEnabledTabs) {\r\n\t\t\t\tclasses.push('hide');\r\n\t\t\t}\r\n\t\t\tif (this.spaceLimited) {\r\n\t\t\t\tclasses.push('spaceLimited');\r\n\t\t\t}\r\n\t\t\tif (this.pills && this.pillsMultiline) {\r\n\t\t\t\tclasses.push('multiline');\r\n\t\t\t}\r\n\t\t\treturn classes;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\thasEnabledTabs(hasTabs) {\r\n\t\t\tthis.$emit('empty', !hasTabs);\r\n\t\t},\r\n\t\tactiveTab() {\r\n\t\t\tthis.adjustSizes();\r\n\t\t}\r\n\t},\r\n\tbeforeCreate() {\r\n\t\tUtils.enableHtmlProps(this);\r\n\t},\r\n\tmethods: {\r\n\t\taddTab(name, icon = null, data = null, id = null, selected = false, closable = false, show = null, hide = null, close = null, allowShow = null) {\r\n\t\t\tif (!id) {\r\n\t\t\t\tid = this.id + \"_tab_\" + this.tabIdCounter++;\r\n\t\t\t}\r\n\t\t\tthis.dynamicTabs.push({\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: name,\r\n\t\t\t\ticon: icon,\r\n\t\t\t\tdata: data,\r\n\t\t\t\tselected: selected,\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tclosable: closable,\r\n\t\t\t\tshow: show,\r\n\t\t\t\thide: hide,\r\n\t\t\t\tclose: close,\r\n\t\t\t\tallowShow: allowShow\r\n\t\t\t});\r\n\t\t\tif (selected) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.selectTab(id);\r\n\t\t\t\t\tthis.adjustSizes();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDynamic(tab, evt) {\r\n\t\t\tvar index = this.tabs.findIndex(t => t.id === tab.id);\r\n\t\t\tif (typeof tab[evt] === 'function' && index !== -1) {\r\n\t\t\t\ttab[evt](this.tabs[index]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onDynamicAllowShow(tab) {\r\n\t\t\tvar index = this.tabs.findIndex(t => t.id === tab.id);\r\n\t\t\tif (typeof tab.allowShow === 'function' && index !== -1) {\r\n\t\t\t\treturn await tab.allowShow(this.tabs[index]);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tadjustSizes() {\r\n\t\t\tif (!this.$refs.tabsHeader) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.spaceLimited = this.$refs.tabsHeader.getBoundingClientRect().width < this.tabs.length * 96; // 96 = 6em = 6*16\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (!this.$refs.tabsHeader) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar overflows = this.$refs.tabsHeader.scrollWidth > this.$refs.tabsHeader.parentNode.getBoundingClientRect().width;\r\n\t\t\t\tthis.$refs.tabsHeader.style.overflowX = overflows ? \"auto\" : \"visible\";\r\n\t\t\t\tthis.$refs.tabsHeader.style.overflowY = overflows ? \"hidden\" : \"visible\";\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetTab(id) {\r\n\t\t\tfor (let i in this.tabs) {\r\n\t\t\t\tif (this.tabs[i].id == id) {\r\n\t\t\t\t\treturn this.tabs[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetActiveTab() {\r\n\t\t\treturn this.activeTab;\r\n\t\t},\r\n\t\tgetActiveTabId() {\r\n\t\t\tif (this.activeTab !== null) {\r\n\t\t\t\treturn this.activeTab.id;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync selectTab(selectedTab) {\r\n\t\t\tif (typeof selectedTab === \"string\") {\r\n\t\t\t\tselectedTab = this.getTab(selectedTab); // Get tab by id\r\n\t\t\t}\r\n\t\t\tif (this.activeTab === selectedTab || !selectedTab) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (await selectedTab.canShow()) {\r\n\t\t\t\tif (this.activeTab !== null) {\r\n\t\t\t\t\tthis.activeTab.active = false;\r\n\t\t\t\t\tthis.activeTab.$emit('hide', this.activeTab);\r\n\t\t\t\t}\r\n\t\t\t\tthis.activeTab = selectedTab;\r\n\t\t\t\tthis.activeTab.active = true;\r\n\t\t\t\tthis.$emit('selected', selectedTab);\r\n\t\t\t\t// Make sure the component is really shown by using nextTick...\r\n\t\t\t\tthis.$nextTick(() => this.activeTab.$emit('show', this.activeTab));\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloseTab(tab) {\r\n\t\t\tif (typeof tab === \"string\") {\r\n\t\t\t\ttab = this.getTab(tab); // Get tab by id\r\n\t\t\t}\r\n\t\t\tif (!tab.closable) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar index = this.tabs.findIndex(t => t.id === tab.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tthis.tabs.splice(index, 1);\r\n\t\t\t\tvar index2 = this.dynamicTabs.findIndex(t => t.id === tab.id);\r\n\t\t\t\tif (index2 !== -1) {\r\n\t\t\t\t\tthis.dynamicTabs.splice(index2, 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (tab === this.activeTab) {\r\n\t\t\t\t\tthis.activeTab = null;\r\n\t\t\t\t}\r\n\t\t\t\ttab.$emit('close', tab);\r\n\t\t\t\tthis.resetActiveTab();\r\n\t\t\t\tthis.adjustSizes();\r\n\t\t\t}\r\n\t\t},\r\n\t\tresetActiveTab(force = false) {\r\n\t\t\tif (this.tabs.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (force || this.getActiveTab() === null) {\r\n\t\t\t\tthis.selectTab(this.tabs.find(tab => tab.enabled));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import './base.scss';\r\n\r\n.vue-component.tabs {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 100%;\r\n\r\n\t.tabsHeader {\r\n\t\tdisplay: flex;\r\n\r\n\t\t.tabName,\r\n\t\t.tabClose,\r\n\t\t.tabClose {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\r\n\t\t.tabName {\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\toverflow: hidden;\r\n\t\t\tmin-width: 2em;\r\n\t\t\tflex-grow: 1;\r\n\t\t}\r\n\t\t.tabHasIcon .tabName {\r\n\t\t\tmargin-left: 5px;\r\n\t\t}\r\n\t}\r\n\t.tabsBody {\r\n\t\tflex-grow: 1;\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.tabContent.tabActive {\r\n\t\tdisplay: block;\r\n\t}\r\n\t.tabItem {\r\n\t\tdisplay: flex;\r\n\t\tbackground-color: transparent;\r\n\t\tborder: 0;\r\n\t\tpadding: 5px 10px;\r\n\t\tmin-width: 6em;\r\n\t\twhite-space: nowrap;\r\n\t\tcursor: pointer;\r\n\t\t\r\n\t\t&::-moz-focus-inner {\r\n\t\t\tborder: 0;\r\n\t\t}\r\n\t\t&:focus {\r\n\t\t\toutline: none;\r\n\t\t}\r\n\t\t.tabClose {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tmargin-left: 5px;\r\n\t\t\theight: 1em;\r\n\t\t\twidth: 1em;\r\n\t\t\tmin-width: 1em;\r\n\r\n\t\t\t* {\r\n\t\t\t\tstroke: black;\r\n\t\t\t}\r\n\t\t\t&:hover * {\r\n\t\t\t\tstroke: red;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t&.top .tabItem {\r\n\t\tmargin: 5px 5px 0 0;\r\n\t}\r\n\t&.bottom {\r\n\t\tflex-direction: column-reverse;\r\n\r\n\t\t.tabItem {\r\n\t\t\tmargin: 0 5px 5px 0;\r\n\t\t}\r\n\t}\r\n\t&.boxed {\r\n\t\tborder-radius: 3px;\r\n\t\tborder: 1px solid #aaa;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t> .tabsHeader {\r\n\t\t\tpadding-left: 5px;\r\n\t\t\tbackground-color: #f9f9f9;\r\n\r\n\t\t\t> .tabItem {\r\n\t\t\t\tborder: 1px solid #aaa;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tbackground-color: #eee;\r\n\r\n\t\t\t\t&:hover .fas,\r\n\t\t\t\t&:hover .tabName {\r\n\t\t\t\t\tcolor: black;\r\n\t\t\t\t}\r\n\t\t\t\t&.tabActive {\r\n\t\t\t\t\tbackground-color: white;\r\n\t\t\t\t\tcolor: black;\r\n\t\t\t\t\tz-index: 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t> .tabsBody > .tabContent {\r\n\t\t\tbackground-color: white;\r\n\t\t\toverflow: auto;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t\t&.top {\r\n\t\t\t> .tabsBody > .tabContent {\r\n\t\t\t\tborder-top: 1px solid #ddd;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t}\r\n\t\t\t> .tabsHeader {\r\n\t\t\t\t> .tabItem {\r\n\t\t\t\t\tborder-bottom: 0;\r\n\t\t\t\t\tborder-radius: 5px 5px 0 0;\r\n\r\n\t\t\t\t\t&.tabActive {\r\n\t\t\t\t\t\tpadding-bottom: 6px;\r\n\t\t\t\t\t\tmargin-bottom: -1px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t&.bottom {\r\n\t\t\t> .tabsBody > .tabContent {\r\n\t\t\t\tborder-bottom: 1px solid #ddd;\r\n\t\t\t\tpadding-bottom: 1px;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t}\r\n\t\t\t> .tabsHeader > .tabItem {\r\n\t\t\t\tborder-top: 0;\r\n\t\t\t\tborder-radius: 0 0 5px 5px;\r\n\r\n\t\t\t\t&.tabActive {\r\n\t\t\t\t\tpadding-top: 6px;\r\n\t\t\t\t\tmargin-top: -1px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t&.pills {\r\n\t\t&.multiline > .tabsHeader {\r\n\t\t\tdisplay: block;\r\n\r\n\t\t\t> .tabItem {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t}\r\n\t\t}\r\n\t\t> .tabsBody > .tabContent {\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t\t> .tabsHeader {\r\n\t\t\t> .tabItem {\r\n\t\t\t\tborder: 1px solid #000;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tcolor: #000;\r\n\t\t\t\topacity: 0.6;\r\n\r\n\t\t\t\t&:hover {\r\n\t\t\t\t\topacity: 1;\r\n\t\t\t\t}\r\n\t\t\t\t&.tabActive {\r\n\t\t\t\t\topacity: 1;\r\n\t\t\t\t\tborder-width: 2px;\r\n\t\t\t\t\tpadding: 4px 9px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t&.hide {\r\n\t\tborder: 0;\r\n\r\n\t\t> .tabsEmpty:empty {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t> .tabsBody {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\t> .tabsHeader {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\t&.spaceLimited {\r\n\t\t.tabHasIcon:not(.tabActive) .tabName {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\t.tabItem:not(.tabActive) .tabClose {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\t.tabItem {\r\n\t\t\tmin-width: auto;\r\n\t\t}\r\n\t}\r\n}\r\n</style>","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tabs.vue?vue&type=template&id=7f5bbce9&\"\nimport script from \"./Tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./Tabs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tabs.vue?vue&type=style&index=0&id=7f5bbce9&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}